local DataStoreService = game:GetService("DataStoreService")
local toolStore = DataStoreService:GetDataStore("ToolSaveData") -- Tạo DataStore

local toolName = "Admin Combat" -- Đổi tên Tool thành Admin Combat

-- Khi người chơi rời game, lưu trạng thái Tool
game.Players.PlayerRemoving:Connect(function(player)
    local hasTool = false
    if player.Backpack:FindFirstChild(toolName) or player.Character and player.Character:FindFirstChild(toolName) then
        hasTool = true
    end
    
    toolStore:SetAsync(player.UserId, hasTool)
end)

-- Khi người chơi tham gia game, kiểm tra xem họ có Tool hay không
game.Players.PlayerAdded:Connect(function(player)
    local success, hasTool = pcall(function()
        return toolStore:GetAsync(player.UserId)
    end)
    
    if success and hasTool then
        -- Tạo Tool mới cho người chơi
        local tool = Instance.new("Tool")
        tool.Name = toolName

        local handle = Instance.new("Part") -- Tạo Handle
        handle.Name = "Handle"
        handle.Size = Vector3.new(1, 1, 1)
        handle.BrickColor = BrickColor.new("Bright red")
        handle.CanCollide = false
        handle.Parent = tool

        tool.RequiresHandle = true
        tool.Parent = player.Backpack -- Đưa Tool vào túi đồ
    end
end)
